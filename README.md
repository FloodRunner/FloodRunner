[![FloodRunner](/resources/images/logos/logo.png)](https://floodrunner.dev)

<p align="center">
  <a aria-label="FloodRunner Logo" href="https://floodrunner.dev">
    <img src="https://img.shields.io/badge/MADE%20By%20FLOODRUNNER-6415FF?style=for-the-badge&labelColor=6415FF&logo=data:image/png;base64,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">
  </a>
  <a aria-label="Licence" href="/LICENSE">
    <img alt="" src="https://img.shields.io/badge/LICENCE-APACHE%202.0-4285f4?style=for-the-badge&labelColor=000000">
  </a>
   <a aria-label="Try it now" href="https://app.floodrunner.dev">
    <img alt="" src="https://img.shields.io/badge/TRY %20IT%20NOW-6415FF?style=for-the-badge&labelColor=6415FF">
  </a>
   <a aria-label="Slack Community Invite it now" href="https://join.slack.com/t/floodrunner/shared_invite/zt-i3kjgmzl-YwUecFdFEn4mQiR_OQM0_w">
    <img alt="Join Slack Community" src="https://img.shields.io/badge/JOIN%20COMMUNITY-FFFFFF?style=for-the-badge&labelColor=FFFFFF&logo=data:image/jpeg;base64,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" />
  </a>
</p>

---

A complete framework for monitoring web applications using browser tests. Easily monitor your web applications by continously running browser tests that simulate user behaviour. Browser level tests have advantages over traditional protocol level tests because they are capable of testing any user behaviour simply with easy to maintain readable scripts.

The process of using FloodRunner is simple and easy:

![FloodRunner Process Overview](/resources/images/overview.png)

#### Features:

- <strong>Schedule browser tests</strong>: Easily schedule your browser tests to ensure your application is being continously tested.
- <strong>Multiple scripting frameworks</strong>: Supports both [Puppeteer](https://pptr.dev/) and [Element](https://element.flood.io/) scripts.
- <strong>Detailed Results</strong>: View detailed results of your test executions including all log output, screenshots and execution time.
- <strong>Integrate with Flood.io (coming soon)</strong>: Leverage Flood.io to run your scripts as load tests (applies to Element scripts only)
- <strong>Secure login and API authorization</strong>: Secured using Auth0.com ensuring that login is secure and that data is completely isolated between users.
- <strong>Cloud native</strong>: Components are dockerized and designed to run in Kubernetes, including all relevant configuration scripts needed for deployment and configuration.

## Index

- [Quickstart](#quickstart)
- [Deploying FloodRunner](#deploying-floodrunner)
  - [1. Deploying Traefik](#1-deploying-traefik)
  - [2. Deploying RabbitMq](#2-deploying-rabbitMq)
  - [3. Deploying MongoDB](#3-deploying-mongoDB)
  - [4. Deploying FloodRunner NestJs API](#4-deploying-floodrunner-nestjs-api)
    - [4.1 Setting up Azure Blob Storage](#4.1-setting-up-azure-blob-storage)
  - [5. Deploying FloodRunner React Web App](#5-deploying-floodRunner-react-web-app)
- [Contributing](#contributing)
- [Reporting Issues](#reporting-issues)

## Quickstart

Once your FloodRunner instance is up and running you will be able to login and will be presented with an overview page like this:

![FloodRunner Empty Home Page](/resources/images/usage/empty_home_page.png)

Click `Create Test` and create your browser test using the form:

![FloodRunner Creation Form](/resources/images/usage/creation_form.png)

Your tests will display on the overview page showing their status (passing/failing), test schedule, last run date and test type.

![FloodRunner Home Page](/resources/images/usage/home_page.png)

Click `View Results` to see detailed results of your test executions. Here you can view and download your test script using the `View Script` button and delete the test if its no longer needed. A graph is shown with the latest test executions and clicking on a bar will download that tests logs and any screenshots.

![FloodRunner Results Page](/resources/images/usage/results_page.png)

## Deploying FloodRunner

FloodRunner is fully cloud native and can be deployed into any Kubernetes environment. The architecture is shown below

![FloodRunner Architecture](/resources/images/architecture.png)

> NB. Currently only Microsoft Azure Blob Storage can be used as a storage provider. The framework allows for other providers to be added as long as they implment the `IFileService` interface, PR's for other storage providers are welcomed.

Prerequisites:

- A Kubernetes cluster in order to setup FloodRunner.
- [Skaffold](https://skaffold.dev/) installed (alternatively you can deploy the k8s yml files individually)

The deployments are fully managed by a [Skaffold](https://skaffold.dev/) script which can be found in the `skaffold.yml` file. This file will deploy the underlying kubernetes yml files located in the `k8s` directory.

### 1. Deploying Traefik

Traefik is used as the ingress controller for the K8s cluster and handles all the routing. The Traefik yml scripts can be found in the `k8s/traefik` folder.

Traefik integrates with [Let's Encrypt](https://letsencrypt.org/) to automatically retreive SSL certificates. FloodRunner uses CloudFlare as its DNS provider and Traefik makes use of your CloudFlare details in order to validate the challenge issued by Let's Encrypt to prove domain ownership. If you would like to change the DNS provider refer to the [Traefik documentation](https://docs.traefik.io/https/acme/) for instructions.

You will need to configure the `traefik.yml` file according to your settings. The follow lines need to changed to your CloudFlare email address:

> --certificatesresolvers.le.acme.email=javaadpatel@gmail.com

> name: CF_API_EMAIL value: javaadpatel@gmail.com

Then you need to rename the file `traefik-secrets.yml.bak` to `traefik-secrets.yml` and insert your CloudFlare global API key.

Once configured, run `skaffold run -p traefik` this will setup Traefik and a default `WhoAmI` pod which can be used to check that the Traefik integration with Let's Encrypt and routing is working correctly. The `WhoAmI` pod will be accessible on `https://<YOUR DOMAIN>/healthcheck`.

Then get the Traefik external IP using `kubectl get services` to retrieve the Traefik service. This IP address can then be put into CloudFlare (Or other DNS Provider) to get traffic into the cluster using an A record set to the Traefik External IP Address.

NB. For CloudFlare ensure A record is proxied and SSL Setting is set to `Full`

### 2. Deploying RabbitMq

RabbitMq is used as the messaging service for scheduling test executions and also for communicating from the Sandboxed Kubernetes Browser jobs and the FloodRunner NestJs API.

Ensure Helm is installed on your machine, [install instructions](https://helm.sh/docs/intro/install/). Then complete the following steps:

- Create a namespace for RabbitMq to be deployed into using `kubectl create namespace rabbit`
- Install RabbitMq using `helm install rabbit stable/rabbitmq --namespace rabbit`
- Once installed, username will be `user` and password can be obtained using `(kubectl get secret --namespace rabbit rabbit-rabbitmq -o jsonpath="{.data.rabbitmq-password}" | base64 --decode)`. These credentials can then be used in the `api-secrets.yml` file to specify secrets for the API deployment.
- Run `skaffold run -p rabbitmq` to create the Traefik routes for RabbitMq. This will create a Traefik rule to allow you to access the RabbitMQ management interface on `http://<traefikExternalIp>:15672/rabbitmq/management/#/`. It will also also expose the RabbitMq instance and then the amqp connection string will be `amqp://<rabbitmq-user-name>:<rabbitmq-password>@<traefikExternalIp>` allowing you to access it from outside the cluster if desired.

### 3. Deploying MongoDB

MongoDB is used for the storing the tests and test results as well as by [Agenda](https://github.com/agenda/agenda) for scheduling the test runs.

You will need to configure the `mongodb-configmap.yml` file and change the value of `MONGO_INITDB_ROOT_USERNAME` to be the username you want and then also change the value of `MONGO_INITDB_ROOT_PASSWORD` in the `mongodb-deployment.yml` file to the password you want.

Once configured, run `skaffold run -p mongodb` this will setup a MongoDb database that uses a persistent volume to store data in the Kuberenetes cluster.

### 4. Deploying FloodRunner NestJs API

The API controls all the operations relating to test creation, modification, deletion and kicking off the kubernetes job to execute the browser tests.

You will need to configure the `api-configmap.yml` file ensuring that you input the correct Auth0 settings for secure login, and azure storage account name.

Then you need to rename the `api.secrets.yml.bak` file to `api.secrets.yml` and input the required secrets such as the MongoDB database username/password, the RabbitMQ username/password and the Azure storage access key.

Once configured, run `skaffold run -p api` this will setup the FloodRunner NestJS API. Ensure that you are pulling the correct (and latest) docker image from whichever registry you choose.

You will then need to login to your DNS provider (eg. CloudFlare) and create a CNAME record for `app` with a value of `<YOUR DOMAIN>`. This will ensure that Traefik is able to route to your API.

#### 4.1 Setting up Azure Blob Storage

If you choose to use Azure blob storage for storing the browser test logs and screenshots, it is important to configure the CORS origins in the portal to include to allow the frontend web portal to fetch the resources. For a broad configuration use:

- Allowed origins: \*
- Allowed methods: GET
- Allowed headers: \*
- Exposed headers: \*
- Max age: 600

If this is not configured you will receive CORS errors when fetching the resources.

### 5. Deploying FloodRunner React Web App

The front end allows users to create/manage browser tests and view the results of those tests.

You will need to configure the `web-configmap.yml` file and ensure you put in the correct settings for your Auth0 instance and also the correct url for your floodrunner api, which should be at `https://app.<YOUR DOMAIN>/api`.

Once configured, run `skaffold run -p web` this will setup the FloodRunner ReactJS Frontend. Ensure that you are pulling the correct (and latest) docker image from whichever registry you choose.

## Contributing

Pull requests and feedback are welcomed.

## Reporting Issues

If you encounter any issues with the framework please [open an issue](https://github.com/FloodRunner/FloodRunner/issues) on the GitHub project.
